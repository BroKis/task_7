{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ilaki\\\\WebstormProjects\\\\task_7\\\\lab7\\\\src\\\\pages\\\\Login\\\\index.js\",\n  _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from \"react\";\nimport { AuthService } from \"../../services/AuthService\";\nimport s from \"./style.module.css\";\nimport { Navigate } from \"react-router-dom\";\nimport { AuthBlock } from \"../../components/AuthBlock\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Login = () => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [response, setResponse] = useState();\n  const [checkAuth, setCheckAuth] = useState();\n  useEffect(() => {\n    (async () => {\n      const response = await AuthService.checkAuth();\n      setCheckAuth(response.status === 200);\n    })();\n  }, []);\n  const handleClick = useCallback(async () => {\n    setResponse(null);\n    const response = await AuthService.login(username, password);\n    setResponse(response);\n  }, [username, password]);\n  const handleChangeLogin = useCallback(e => {\n    setUsername(e.target.value);\n  }, []);\n  const handleChangePassword = useCallback(e => {\n    setPassword(e.target.value);\n  }, []);\n  let responseBlock;\n  switch (response === null || response === void 0 ? void 0 : response.status) {\n    case 400:\n      responseBlock = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.error,\n        children: \"\\u041D\\u0435\\u043A\\u043A\\u043E\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 \\u043B\\u043E\\u0433\\u0438\\u043D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 29\n      }, this);\n      break;\n    case 401:\n      responseBlock = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.error,\n        children: \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 29\n      }, this);\n      break;\n    case 200:\n      responseBlock = /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 29\n      }, this);\n      break;\n    default:\n      responseBlock = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.responseBlock\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 29\n      }, this);\n      break;\n  }\n  return checkAuth ? /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 24\n  }, this) : /*#__PURE__*/_jsxDEV(AuthBlock, {\n    username: username,\n    password: password,\n    handleChangeLogin: handleChangeLogin,\n    handleChangePassword: handleChangePassword,\n    handleClick: handleClick,\n    responseBlock: responseBlock,\n    title: \"Sign In\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 53\n  }, this);\n};\n_s(Login, \"fVgwjiunbQJdXeF1PrsjlfzXCEA=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useCallback","useEffect","useState","AuthService","s","Navigate","AuthBlock","jsxDEV","_jsxDEV","Login","_s","username","setUsername","password","setPassword","response","setResponse","checkAuth","setCheckAuth","status","handleClick","login","handleChangeLogin","e","target","value","handleChangePassword","responseBlock","className","error","children","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","title","_c","$RefreshReg$"],"sources":["C:/Users/ilaki/WebstormProjects/task_7/lab7/src/pages/Login/index.js"],"sourcesContent":["import {useCallback, useEffect, useState} from \"react\";\r\nimport {AuthService} from \"../../services/AuthService\";\r\nimport s from \"./style.module.css\";\r\nimport {Navigate} from \"react-router-dom\";\r\nimport {AuthBlock} from \"../../components/AuthBlock\";\r\n\r\nexport const Login = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [response, setResponse] = useState();\r\n    const [checkAuth, setCheckAuth] = useState();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            const response = await AuthService.checkAuth();\r\n            setCheckAuth(response.status === 200);\r\n        })();\r\n    }, []);\r\n\r\n    const handleClick = useCallback(async () => {\r\n        setResponse(null)\r\n        const response = await AuthService.login(username, password);\r\n        setResponse(response);\r\n    }, [username, password])\r\n\r\n    const handleChangeLogin = useCallback((e) => {\r\n        setUsername(e.target.value);\r\n    }, []);\r\n\r\n    const handleChangePassword = useCallback((e) => {\r\n        setPassword(e.target.value);\r\n    }, []);\r\n\r\n    let responseBlock;\r\n    switch (response?.status) {\r\n        case 400:\r\n            responseBlock = <div className={s.error}>Неккоректный логин</div>\r\n            break;\r\n        case 401:\r\n            responseBlock = <div className={s.error}>Неверный пароль</div>\r\n            break;\r\n        case 200:\r\n            responseBlock = <Navigate to=\"/\" replace/>\r\n            break;\r\n        default:\r\n            responseBlock = <div className={s.responseBlock}></div>\r\n            break;\r\n    }\r\n\r\n    return checkAuth ? <Navigate to=\"/\" replace/> : <AuthBlock\r\n        username={username}\r\n        password={password}\r\n        handleChangeLogin={handleChangeLogin}\r\n        handleChangePassword={handleChangePassword}\r\n        handleClick={handleClick}\r\n        responseBlock={responseBlock}\r\n        title=\"Sign In\"\r\n    />\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}